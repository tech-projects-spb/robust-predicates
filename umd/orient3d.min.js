!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const{epsilon:t,splitter:n,resulterrbound:e,estimate:s,vec:r,sum:u,scale:a}=require("./util.js"),o=(7+56*t)*t,i=(3+28*t)*t,c=(26+288*t)*t*t,f=r(4),b=r(4),l=r(4),h=r(4),M=r(4),d=r(4),m=r(4),p=r(4),j=r(4),q=r(8),v=r(8),x=r(8),y=r(4),g=r(8),k=r(8),w=r(8),z=r(12);let A=r(192),B=r(192);function C(t,n,e){t=u(t,A,n,e,B);const s=A;return A=B,B=s,t}function D(t,e,s,r,u,a,o,i){let c,f,b,l,h,M,d,m,p,j,q,v,x,y,g;return 0===t?0===e?(o[0]=0,i[0]=0,1):(g=-e,j=g*s,f=n*g,b=f-(f-g),l=g-b,f=n*s,h=f-(f-s),M=s-h,o[0]=l*M-(j-b*h-l*h-b*M),o[1]=j,j=e*u,f=n*e,b=f-(f-e),l=e-b,f=n*u,h=f-(f-u),M=u-h,i[0]=l*M-(j-b*h-l*h-b*M),i[1]=j,2):0===e?(j=t*r,f=n*t,b=f-(f-t),l=t-b,f=n*r,h=f-(f-r),M=r-h,o[0]=l*M-(j-b*h-l*h-b*M),o[1]=j,g=-t,j=g*a,f=n*g,b=f-(f-g),l=g-b,f=n*a,h=f-(f-a),M=a-h,i[0]=l*M-(j-b*h-l*h-b*M),i[1]=j,2):(j=t*r,f=n*t,b=f-(f-t),l=t-b,f=n*r,h=f-(f-r),M=r-h,q=l*M-(j-b*h-l*h-b*M),v=e*s,f=n*e,b=f-(f-e),l=e-b,f=n*s,h=f-(f-s),M=s-h,x=l*M-(v-b*h-l*h-b*M),d=q-x,c=q-d,o[0]=q-(d+c)+(c-x),m=j+d,c=m-j,p=j-(m-c)+(d-c),d=p-v,c=p-d,o[1]=p-(d+c)+(c-v),y=m+d,c=y-m,o[2]=m-(y-c)+(d-c),o[3]=y,j=e*u,f=n*e,b=f-(f-e),l=e-b,f=n*u,h=f-(f-u),M=u-h,q=l*M-(j-b*h-l*h-b*M),v=t*a,f=n*t,b=f-(f-t),l=t-b,f=n*a,h=f-(f-a),M=a-h,x=l*M-(v-b*h-l*h-b*M),d=q-x,c=q-d,i[0]=q-(d+c)+(c-x),m=j+d,c=m-j,p=j-(m-c)+(d-c),d=p-v,c=p-d,i[1]=p-(d+c)+(c-v),y=m+d,c=y-m,i[2]=m-(y-c)+(d-c),i[3]=y,4)}function E(t,e,s,r,u){let a,o,i,c,f,b,l,h,M,d,m,p,j;return m=e*s,o=n*e,i=o-(o-e),c=e-i,o=n*s,f=o-(o-s),b=s-f,p=c*b-(m-i*f-c*f-i*b),o=n*r,f=o-(o-r),b=r-f,l=p*r,o=n*p,i=o-(o-p),c=p-i,y[0]=c*b-(l-i*f-c*f-i*b),h=m*r,o=n*m,i=o-(o-m),c=m-i,d=c*b-(h-i*f-c*f-i*b),M=l+d,a=M-l,y[1]=l-(M-a)+(d-a),j=h+M,y[2]=M-(j-h),y[3]=j,t=C(t,4,y),0!==u&&(o=n*u,f=o-(o-u),b=u-f,l=p*u,o=n*p,i=o-(o-p),c=p-i,y[0]=c*b-(l-i*f-c*f-i*b),h=m*u,o=n*m,i=o-(o-m),c=m-i,d=c*b-(h-i*f-c*f-i*b),M=l+d,a=M-l,y[1]=l-(M-a)+(d-a),j=h+M,y[2]=M-(j-h),y[3]=j,t=C(t,4,y)),t}module.exports={orient3d:function(t,r,y,B,F,G,H,I,J,K,L,N){const O=t-K,P=B-K,Q=H-K,R=r-L,S=F-L,T=I-L,U=y-N,V=G-N,W=J-N,X=P*T,Y=Q*S,Z=Q*R,$=O*T,_=O*S,tt=P*R,nt=U*(X-Y)+V*(Z-$)+W*(_-tt),et=(Math.abs(X)+Math.abs(Y))*Math.abs(U)+(Math.abs(Z)+Math.abs($))*Math.abs(V)+(Math.abs(_)+Math.abs(tt))*Math.abs(W),st=o*et;return nt>st||-nt>st?nt:function(t,r,o,y,B,F,G,H,I,J,K,L,N){let O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,tt,nt,et,st,rt,ut,at,ot,it,ct;const ft=t-J,bt=y-J,lt=G-J,ht=r-K,Mt=B-K,dt=H-K,mt=o-L,pt=F-L,jt=I-L;ut=bt*dt,Z=n*bt,$=Z-(Z-bt),_=bt-$,Z=n*dt,tt=Z-(Z-dt),nt=dt-tt,at=_*nt-(ut-$*tt-_*tt-$*nt),ot=lt*Mt,Z=n*lt,$=Z-(Z-lt),_=lt-$,Z=n*Mt,tt=Z-(Z-Mt),nt=Mt-tt,it=_*nt-(ot-$*tt-_*tt-$*nt),et=at-it,Y=at-et,f[0]=at-(et+Y)+(Y-it),st=ut+et,Y=st-ut,rt=ut-(st-Y)+(et-Y),et=rt-ot,Y=rt-et,f[1]=rt-(et+Y)+(Y-ot),ct=st+et,Y=ct-st,f[2]=st-(ct-Y)+(et-Y),f[3]=ct,ut=lt*ht,Z=n*lt,$=Z-(Z-lt),_=lt-$,Z=n*ht,tt=Z-(Z-ht),nt=ht-tt,at=_*nt-(ut-$*tt-_*tt-$*nt),ot=ft*dt,Z=n*ft,$=Z-(Z-ft),_=ft-$,Z=n*dt,tt=Z-(Z-dt),nt=dt-tt,it=_*nt-(ot-$*tt-_*tt-$*nt),et=at-it,Y=at-et,b[0]=at-(et+Y)+(Y-it),st=ut+et,Y=st-ut,rt=ut-(st-Y)+(et-Y),et=rt-ot,Y=rt-et,b[1]=rt-(et+Y)+(Y-ot),ct=st+et,Y=ct-st,b[2]=st-(ct-Y)+(et-Y),b[3]=ct,ut=ft*Mt,Z=n*ft,$=Z-(Z-ft),_=ft-$,Z=n*Mt,tt=Z-(Z-Mt),nt=Mt-tt,at=_*nt-(ut-$*tt-_*tt-$*nt),ot=bt*ht,Z=n*bt,$=Z-(Z-bt),_=bt-$,Z=n*ht,tt=Z-(Z-ht),nt=ht-tt,it=_*nt-(ot-$*tt-_*tt-$*nt),et=at-it,Y=at-et,l[0]=at-(et+Y)+(Y-it),st=ut+et,Y=st-ut,rt=ut-(st-Y)+(et-Y),et=rt-ot,Y=rt-et,l[1]=rt-(et+Y)+(Y-ot),ct=st+et,Y=ct-st,l[2]=st-(ct-Y)+(et-Y),l[3]=ct,O=u(u(a(4,f,mt,g),g,a(4,b,pt,k),k,w),w,a(4,l,jt,g),g,A);let qt=s(O,A),vt=i*N;if(qt>=vt||-qt>=vt)return qt;if(Y=t-ft,P=t-(ft+Y)+(Y-J),Y=y-bt,Q=y-(bt+Y)+(Y-J),Y=G-lt,R=G-(lt+Y)+(Y-J),Y=r-ht,S=r-(ht+Y)+(Y-K),Y=B-Mt,T=B-(Mt+Y)+(Y-K),Y=H-dt,U=H-(dt+Y)+(Y-K),Y=o-mt,V=o-(mt+Y)+(Y-L),Y=F-pt,W=F-(pt+Y)+(Y-L),Y=I-jt,X=I-(jt+Y)+(Y-L),0===P&&0===Q&&0===R&&0===S&&0===T&&0===U&&0===V&&0===W&&0===X)return qt;if(vt=c*N+e*Math.abs(qt),qt+=mt*(bt*U+dt*Q-(Mt*R+lt*T))+V*(bt*dt-Mt*lt)+pt*(lt*S+ht*R-(dt*P+ft*U))+W*(lt*ht-dt*ft)+jt*(ft*T+Mt*P-(ht*Q+bt*S))+X*(ft*Mt-ht*bt),qt>=vt||-qt>=vt)return qt;const xt=D(P,S,bt,Mt,lt,dt,h,M),yt=D(Q,T,lt,dt,ft,ht,d,m),gt=D(R,U,ft,ht,bt,Mt,p,j),kt=u(yt,d,gt,j,q);O=C(O,a(kt,q,mt,w),w);const wt=u(gt,p,xt,M,v);O=C(O,a(wt,v,pt,w),w);const zt=u(xt,h,yt,m,x);return O=C(O,a(zt,x,jt,w),w),0!==V&&(O=C(O,a(4,f,V,z),z),O=C(O,a(kt,q,V,w),w)),0!==W&&(O=C(O,a(4,b,W,z),z),O=C(O,a(wt,v,W,w),w)),0!==X&&(O=C(O,a(4,l,X,z),z),O=C(O,a(zt,x,X,w),w)),0!==P&&(0!==T&&(O=E(O,P,T,jt,X)),0!==U&&(O=E(O,-P,U,pt,W))),0!==Q&&(0!==U&&(O=E(O,Q,U,mt,V)),0!==S&&(O=E(O,-Q,S,jt,X))),0!==R&&(0!==S&&(O=E(O,R,S,pt,W)),0!==T&&(O=E(O,-R,T,mt,V))),A[O-1]}(t,r,y,B,F,G,H,I,J,K,L,N,et)},orient3dfast:function(t,n,e,s,r,u,a,o,i,c,f,b){const l=n-f,h=r-f,M=o-f,d=e-b,m=u-b,p=i-b;return(t-c)*(h*p-m*M)+(s-c)*(M*d-p*l)+(a-c)*(l*m-d*h)}}}));
